# Cosnap AI Backend Environment Variables
# Copy this file to .env and fill in your actual values

# ==================== Database ====================
DATABASE_URL="postgresql://username:password@localhost:5432/cosnap_ai"

# ==================== JWT Secrets ====================
JWT_ACCESS_SECRET="your-super-secret-jwt-access-key-here-min-32-chars"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-here"
JWT_ISSUER="cosnap-api"
JWT_AUDIENCE="cosnap-app"

# ==================== RunningHub API ====================
RUNNINGHUB_API_KEY="your-runninghub-api-key"
RUNNINGHUB_REGION="china"

# ==================== Ali OSS Cloud Storage ====================
ALI_OSS_REGION="oss-cn-hangzhou"
ALI_OSS_ACCESS_KEY_ID="your-ali-oss-access-key-id"
ALI_OSS_ACCESS_KEY_SECRET="your-ali-oss-access-key-secret"
ALI_OSS_BUCKET="your-bucket-name"

# ==================== WeChat Pay Configuration (微信支付) ====================
# 微信支付商户号
WECHAT_MCH_ID="your-wechat-merchant-id"

# 微信公众号/小程序 AppID
WECHAT_APP_ID="your-wechat-app-id"

# 微信应用密钥（获取OpenID用）
WECHAT_APP_SECRET="your-wechat-app-secret"

# 微信支付API密钥
WECHAT_API_KEY="your-wechat-pay-api-key"

# 微信支付回调通知地址
WECHAT_NOTIFY_URL="https://your-domain.com/api/payments/webhooks/wechat"

# 微信支付证书路径（用于退款等操作）
WECHAT_CERT_PATH="/path/to/wechat/apiclient_cert.pem"
WECHAT_KEY_PATH="/path/to/wechat/apiclient_key.pem"

# ==================== Alipay Configuration (支付宝支付) ====================
# 支付宝应用ID
ALIPAY_APP_ID="your-alipay-app-id"

# 支付宝应用私钥（PKCS8格式）
ALIPAY_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
your-alipay-private-key-content-here
-----END PRIVATE KEY-----"

# 支付宝应用公钥（用于验签）
ALIPAY_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
your-alipay-public-key-content-here
-----END PUBLIC KEY-----"

# 支付宝官方公钥（用于验签支付宝返回的数据）
ALIPAY_PUBLIC_KEY_OFFICIAL="-----BEGIN PUBLIC KEY-----
alipay-official-public-key-content-here
-----END PUBLIC KEY-----"

# 支付宝网关地址
ALIPAY_GATEWAY_URL="https://openapi.alipay.com/gateway.do"

# 支付宝异步通知地址
ALIPAY_NOTIFY_URL="https://your-domain.com/api/payments/webhooks/alipay"

# 支付宝同步返回地址
ALIPAY_RETURN_URL="https://your-domain.com/api/payments/return/alipay"

# ==================== Frontend Configuration ====================
# 前端应用地址（用于支付后跳转）
FRONTEND_URL="https://your-frontend-domain.com"

# CORS允许的域名
CORS_ORIGIN="https://your-frontend-domain.com,http://localhost:5173"

# ==================== Server Configuration ====================
PORT="3001"
NODE_ENV="development"

# ==================== Rate Limiting ====================
# API请求限制（每15分钟允许的请求数）
RATE_LIMIT_MAX="1000"

# 支付请求限制（每5分钟允许的支付请求数）
PAYMENT_RATE_LIMIT_MAX="10"

# ==================== Security ====================
# 安全相关配置
BCRYPT_SALT_ROUNDS="12"

# ==================== Logging ====================
# 日志级别
LOG_LEVEL="info"

# ==================== Redis (Optional for advanced rate limiting) ====================
# REDIS_URL="redis://localhost:6379"

# ==================== Monitoring (Optional) ====================
# SENTRY_DSN="your-sentry-dsn-for-error-tracking"

# ==================== Chinese Payment Specific ====================
# 支付环境：sandbox（沙箱）或 production（生产）
PAYMENT_ENVIRONMENT="sandbox"

# 支付订单超时时间（分钟）
PAYMENT_TIMEOUT="30"

# 是否启用支付日志
ENABLE_PAYMENT_LOGGING="true"

# 是否启用支付安全检查
ENABLE_PAYMENT_SECURITY_CHECK="true"

# ==================== Subscription Management ====================
# 免费用户月度使用限制
FREE_TIER_MONTHLY_LIMIT="5"

# 订阅检查间隔（小时）
SUBSCRIPTION_CHECK_INTERVAL="24"

# 自动续费提醒天数
AUTO_RENEWAL_REMINDER_DAYS="3"