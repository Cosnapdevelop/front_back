# Production Environment Variables for Cosnap AI
# Copy this file to .env.production and fill in the values

# =============================================================================
# BACKEND CONFIGURATION (.env for runninghub-backend/)
# =============================================================================

# Server Configuration
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# Database Configuration
DATABASE_URL=postgresql://username:password@host:port/database?sslmode=require
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_QUERY_TIMEOUT=10000
DB_SSL_ENABLED=true

# Redis Configuration (for caching and session management)
REDIS_ENABLED=true
REDIS_URL=redis://username:password@host:port/0
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=10000

# JWT Configuration
JWT_ACCESS_SECRET=your-very-secure-access-token-secret-at-least-32-characters
JWT_REFRESH_SECRET=your-very-secure-refresh-token-secret-at-least-32-characters
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
JWT_ISSUER=cosnap-ai
JWT_AUDIENCE=cosnap-users

# CORS Configuration
ALLOWED_ORIGINS=https://cosnap.vercel.app,https://your-custom-domain.com

# Rate Limiting Configuration
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=100
AUTH_RATE_LIMIT_MAX=5
UPLOAD_RATE_LIMIT_MAX=20
EFFECTS_RATE_LIMIT_MAX=50

# Security Configuration
CSP_ENABLED=true
SSL_ENABLED=true
MAX_REQUEST_SIZE=10mb
MAX_FILE_SIZE=30mb

# Logging Configuration
LOG_LEVEL=warn
LOG_FORMAT=json
FILE_LOGGING_ENABLED=true
LOG_FILE=cosnap-backend.log
LOG_MAX_SIZE=10485760
LOG_MAX_FILES=5

# Monitoring Configuration
SENTRY_ENABLED=true
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_TRACES_SAMPLE_RATE=0.1
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true
PERFORMANCE_MONITORING_ENABLED=true

# Caching Configuration
API_CACHE_ENABLED=true
API_CACHE_TTL=300
EFFECTS_CACHE_TTL=3600
SESSION_CACHE_ENABLED=true
SESSION_CACHE_TTL=86400

# Ali OSS Configuration
ALI_OSS_REGION=oss-cn-hangzhou
ALI_OSS_ACCESS_KEY_ID=your-ali-oss-access-key-id
ALI_OSS_ACCESS_KEY_SECRET=your-ali-oss-access-key-secret
ALI_OSS_BUCKET=your-bucket-name
ALI_OSS_ENDPOINT=https://oss-cn-hangzhou.aliyuncs.com
ALI_OSS_CDN_ENABLED=true
ALI_OSS_CDN_DOMAIN=https://your-cdn-domain.com
ALI_OSS_MAX_FILE_SIZE=31457280

# RunningHub API Configuration
RUNNINGHUB_API_KEY=your-runninghub-api-key
RUNNINGHUB_API_URL_CHINA=https://api.runninghub.cn
RUNNINGHUB_API_URL_HK=https://api.runninghub.hk
RUNNINGHUB_TIMEOUT=60000
RUNNINGHUB_RETRIES=3
RUNNINGHUB_MAX_SOCKETS=10

# Chinese Payment Configuration
# WeChat Pay
WECHAT_APP_ID=your-wechat-app-id
WECHAT_MCH_ID=your-wechat-merchant-id
WECHAT_PAY_KEY=your-wechat-pay-key
WECHAT_NOTIFY_URL=https://your-backend-domain.com/api/payments/wechat/notify

# Alipay
ALIPAY_APP_ID=your-alipay-app-id
ALIPAY_PRIVATE_KEY=your-alipay-private-key
ALIPAY_PUBLIC_KEY=your-alipay-public-key
ALIPAY_GATEWAY=https://openapi.alipay.com/gateway.do
ALIPAY_NOTIFY_URL=https://your-backend-domain.com/api/payments/alipay/notify

# =============================================================================
# FRONTEND CONFIGURATION (.env.production for project/)
# =============================================================================

# Application Configuration
VITE_APP_VERSION=1.0.0
VITE_BUILD_TIME=2024-01-01T00:00:00.000Z

# API Configuration
VITE_API_BASE_URL=https://your-backend-domain.com
VITE_API_TIMEOUT=30000
VITE_API_RETRY_ATTEMPTS=3
VITE_API_RETRY_DELAY=1000

# Feature Flags
VITE_ENABLE_ANALYTICS=true
VITE_ENABLE_ERROR_REPORTING=true
VITE_ENABLE_PERFORMANCE_MONITORING=true
VITE_ENABLE_SERVICE_WORKER=true
VITE_ENABLE_OFFLINE_MODE=false
VITE_ENABLE_PREFETCHING=true
VITE_ENABLE_API_CACHING=true

# Monitoring Configuration
VITE_SENTRY_DSN=https://your-frontend-sentry-dsn@sentry.io/project-id
VITE_SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics Configuration
VITE_GA_ID=G-XXXXXXXXXX
VITE_BAIDU_ANALYTICS_ID=your-baidu-analytics-id

# Cache Configuration
VITE_STATIC_CACHE_DURATION=86400000
VITE_API_CACHE_DURATION=300000

# Feature Flags
VITE_FEATURE_NEW_UPLOADER=false
VITE_FEATURE_ENHANCED_EFFECTS=true
VITE_FEATURE_SOCIAL_SHARING=true
VITE_FEATURE_ADVANCED_FILTERS=false
VITE_FEATURE_REALTIME_PREVIEW=false
VITE_ENABLE_BETA_FEATURES=false

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Railway Configuration (Backend)
RAILWAY_STATIC_URL=https://your-backend-domain.railway.app
RAILWAY_PUBLIC_DOMAIN=your-backend-domain.railway.app

# Vercel Configuration (Frontend)
VERCEL_URL=https://your-frontend-domain.vercel.app
VERCEL_DOMAIN=your-frontend-domain.vercel.app

# Database (Railway PostgreSQL)
PGHOST=your-postgres-host
PGPORT=5432
PGUSER=postgres
PGPASSWORD=your-postgres-password
PGDATABASE=railway

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000

# Metrics Configuration
METRICS_ENABLED=true
PROMETHEUS_ENABLED=true

# Performance Configuration
PERFORMANCE_SAMPLE_RATE=0.1

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Request Limits
REQUEST_TIMEOUT=30000
MAX_FIELD_SIZE=1024
MAX_FIELDS=100
MAX_FILE_FIELDS=10

# SSL Configuration
SSL_KEY_PATH=/path/to/ssl/key.pem
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_CA_PATH=/path/to/ssl/ca.pem

# Database SSL
DB_SSL_ENABLED=true
DB_SSL_REJECT_UNAUTHORIZED=true

# =============================================================================
# DEVELOPMENT OVERRIDES (for staging environment)
# =============================================================================

# Uncomment and modify for staging environment
# NODE_ENV=staging
# LOG_LEVEL=info
# SENTRY_TRACES_SAMPLE_RATE=1.0
# RATE_LIMIT_MAX=1000
# ALLOWED_ORIGINS=https://staging-cosnap.vercel.app,https://cosnap.vercel.app